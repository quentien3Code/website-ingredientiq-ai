{
	"info": {
		"_postman_id": "push-notification-apis",
		"name": "Push Notification APIs - IngredientIQ",
		"description": "Complete collection of push notification APIs including lifecycle notifications, device token management, and admin functions.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üîë Authentication",
			"item": [
				{
					"name": "Login (Get Auth Token)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"mobile_test@example.com\",\n    \"password\": \"testpass123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"login",
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Authentication endpoints to get access tokens"
		},
		{
			"name": "üì± Device Token Management",
			"item": [
				{
					"name": "Register Device Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"your_fcm_device_token_here\",\n    \"platform\": \"web\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/device-token/register/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"device-token",
								"register",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Unregister Device Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"your_fcm_device_token_here\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/device-token/unregister/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"device-token",
								"unregister",
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Manage device tokens for push notifications"
		},
		{
			"name": "üéâ Lifecycle Notifications",
			"item": [
				{
					"name": "Welcome Notification (After Signup)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/welcome/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"welcome",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription Purchased",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"action\": \"purchased\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/subscription/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"subscription",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription Cancelled",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"action\": \"cancelled\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/subscription/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"subscription",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription Upgraded",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"action\": \"upgraded\",\n    \"old_plan\": \"freemium\",\n    \"new_plan\": \"premium\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/subscription/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"subscription",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription Expiring (3 days)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"action\": \"expiring\",\n    \"days_remaining\": 3\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/subscription/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"subscription",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Subscription Expired",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"action\": \"expired\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/subscription/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"subscription",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Scan Limit Warning (3 remaining)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"limit_type\": \"scan_limit\",\n    \"scans_remaining\": 3\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/limit-warning/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"limit-warning",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "AI Insights Limit Warning (2 remaining)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"limit_type\": \"ai_insights_limit\",\n    \"insights_remaining\": 2\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/limit-warning/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"limit-warning",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "App Update Notification",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"version\": \"2.1.0\",\n    \"features\": \"new AI insights and improved scanning\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/app-update/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"app-update",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Feature Reminder",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"feature_name\": \"AI Insights\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/feature-reminder/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"feature-reminder",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Promotional Notification",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"üéâ 50% Off Premium Plan!\",\n    \"body\": \"Limited time offer! Upgrade to Premium and get 50% off your first month.\",\n    \"promo_code\": \"SAVE50\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/promotional/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"promotional",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Engagement Notification (14 days inactive)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"days_inactive\": 14\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/lifecycle/engagement/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"lifecycle",
								"engagement",
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "User lifecycle notifications for signup, subscription, limits, etc."
		},
		{
			"name": "üß™ Testing & Custom Notifications",
			"item": [
				{
					"name": "Send Custom Test Notification",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"üß™ Test Notification\",\n    \"body\": \"This is a test notification from IngredientIQ!\",\n    \"notification_type\": \"custom\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/test/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"test",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Notification History",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/notifications/history/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"history",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Notification Settings",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/notifications/settings/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"settings",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Notification Settings",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"notifications_enabled\": true,\n    \"push_enabled\": true,\n    \"email_enabled\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/settings/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"settings",
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Testing and custom notification endpoints"
		},
		{
			"name": "üë®‚Äçüíº Admin Functions",
			"item": [
				{
					"name": "Get Notification Statistics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/notifications/admin/stats/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"stats",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Send Custom Notification to Multiple Users",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"user_ids\": [1, 2, 3],\n    \"title\": \"üì¢ Important Announcement\",\n    \"body\": \"We have exciting new features coming soon!\",\n    \"data\": {\n        \"action\": \"open_app\",\n        \"screen\": \"announcements\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/admin/send-custom/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"send-custom",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Notification Templates",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/notifications/admin/templates/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"templates",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Notification Template",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"notification_type\": \"welcome\",\n    \"title_template\": \"Welcome to IngredientIQ, {{user_name}}! üéâ\",\n    \"body_template\": \"Hi {{user_name}}! We're excited to have you on board. Start scanning ingredients and discover what's in your food!\",\n    \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/admin/templates/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"templates",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Get App Versions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/notifications/admin/app-versions/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"app-versions",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Create App Version",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"version\": \"2.1.0\",\n    \"platform\": \"web\",\n    \"release_notes\": \"New AI insights and improved scanning\",\n    \"download_url\": \"https://example.com/download\",\n    \"is_current\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/admin/app-versions/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"app-versions",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Trigger Subscription Check",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/notifications/admin/trigger-subscription-check/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"trigger-subscription-check",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Send Bulk Lifecycle Notification",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"notification_type\": \"welcome\",\n    \"user_ids\": [1, 2, 3]\n}"
						},
						"url": {
							"raw": "{{base_url}}/notifications/admin/bulk-lifecycle/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"notifications",
								"admin",
								"bulk-lifecycle",
								""
							]
						}
					},
					"response": []
				}
			],
			"description": "Admin functions for managing notifications, templates, and statistics"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://172.16.102.68:8000/foodapp",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "your_auth_token_here",
			"type": "string"
		},
		{
			"key": "fcm_token",
			"value": "your_fcm_device_token_here",
			"type": "string"
		}
	]
} 